// أضف هذا التعديل داخل كود الـ Script في ملف index.html
// عند الضغط على زر CONFIRMER (دالة handleNext)
function handleNext() {
    userHistory.push(selected);
    if(selected === questions[current].a) score++;
    
    // تحديث النتيجة فورياً ليراها الأدمن
    let upd = {};
    upd[myColor === 'pink' ? 'scorePink' : 'scorePurple'] = score;
    db.update(upd);

    current++; selected = null;
    if(current < questions.length) render(); else finish();
}

// عند انتهاء الكويز (دالة finish)
function finish() {
    clearInterval(timerInterval);
    let upd = {};
    upd[myColor === 'pink' ? 'finishedPink' : 'finishedPurple'] = true; // إشارة انتهاء
    db.update(upd);
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('wait-results').classList.remove('hidden');
}

