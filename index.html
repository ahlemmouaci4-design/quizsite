

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <style>
        /* إضافة شاشة الانتظار */
        #waiting-screen { text-align: center; padding: 50px; }
        .loader { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid var(--purple); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="ambient-glow"></div>
    <div class="glass-ui">
        <div id="status-tag" style="font-size: 0.7rem; color: var(--purple); margin-bottom: 10px;">متصل بالخادم..</div>

        <div id="waiting-screen">
            <h1 class="purple-gradient">في انتظار إشارة البدء...</h1>
            <div class="loader"></div>
            <p>سيبدأ التحدي لجميع الفرق في وقت واحد فور إذن الإدارة.</p>
        </div>

        <div id="quiz-screen" class="hidden">
            </div>

        <div id="wait-results" class="hidden">
            <h1 class="purple-gradient">أحسنت!</h1>
            <p>تم إرسال إجاباتك. انتظر إعلان النتائج من قبل الأدمن.</p>
        </div>

        <div id="result-screen" class="hidden">
            <h1 class="purple-gradient">النتيجة النهائية</h1>
            <div id="score-val" style="font-size: 5rem; font-weight: 900;">0</div>
            <button class="action-btn" onclick="showCorrection()">عرض التصحيح</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // هنا تضع إعدادات Firebase الخاصة بك (سأشرحها لك في الأسفل)
        const firebaseConfig = { databaseURL: "https://quiz-8016b-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database().ref('competition');

        // مراقبة الأوامر من الأدمن
        dbRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (data.status === 'start') {
                document.getElementById('waiting-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
            } else if (data.showResults && current >= questions.length) {
                document.getElementById('wait-results').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');
            }
        });

        // (باقي دوال المسابقة السابقة مع تعديل دوال الانتقال)
    </script>
</body>
</html>


